This is a [Next.js](https://nextjs.org/) project bootstrapped with [`create-next-app`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `pages/index.tsx`. The page auto-updates as you edit the file.

[API routes](https://nextjs.org/docs/api-routes/introduction) can be accessed on [http://localhost:3000/api/hello](http://localhost:3000/api/hello). This endpoint can be edited in `pages/api/hello.ts`.

The `pages/api` directory is mapped to `/api/*`. Files in this directory are treated as [API routes](https://nextjs.org/docs/api-routes/introduction) instead of React pages.

## Commands 

## Step 1 create project with npx create-next-app

```bash 

npx create-next-app@latest --typescript
Need to install the following packages:
  create-next-app@latest
Ok to proceed? (y) y
✔ What is your project named? … gainz

```

#### Ouput 

```bash 

Creating a new Next.js app in /Users/richardhightower/cloudurable/gainz


Success! Created gainz at /Users/richardhightower/cloudurable/gainz
Inside that directory, you can run several commands:

  npm run dev
    Starts the development server.

  npm run build
    Builds the app for production.

  npm start
    Runs the built app in production mode.

We suggest that you begin by typing:

  cd gainz
  npm run dev
  
```

## Step 2 Install React Redux 

```bash

npm install react-redux

```

## Step 3 Install redux toolkit

```bash
npm install @reduxjs/toolkit
```

## Step 5 Set up the store as follows and create simple count splice to test set up

Create files `features/counter/counterSlice.ts`, `app/hooks.ts` and `app/store.ts` as follows:

#### features/counter/counterSlice.ts

```ts 
import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'

import type { AppState, AppThunk } from '../../app/store'
import { fetchCount } from './counterAPI'

export interface CounterState {
  value: number
  status: 'idle' | 'loading' | 'failed'
}

const initialState: CounterState = {
  value: 0,
  status: 'idle',
}

// The function below is called a thunk and allows us to perform async logic. It
// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This
// will call the thunk with the `dispatch` function as the first argument. Async
// code can then be executed and other actions can be dispatched. Thunks are
// typically used to make async requests.
export const incrementAsync = createAsyncThunk(
  'counter/fetchCount',
  async (amount: number) => {
    const response = await fetchCount(amount)
    // The value we return becomes the `fulfilled` action payload
    return response.data
  }
)

export const counterSlice = createSlice({
  name: 'counter',
  initialState,
  // The `reducers` field lets us define reducers and generate associated actions
  reducers: {
    increment: (state) => {
      // Redux Toolkit allows us to write "mutating" logic in reducers. It
      // doesn't actually mutate the state because it uses the Immer library,
      // which detects changes to a "draft state" and produces a brand new
      // immutable state based off those changes
      state.value += 1
    },
    decrement: (state) => {
      state.value -= 1
    },
    // Use the PayloadAction type to declare the contents of `action.payload`
    incrementByAmount: (state, action: PayloadAction<number>) => {
      state.value += action.payload
    },
  },
  // The `extraReducers` field lets the slice handle actions defined elsewhere,
  // including actions generated by createAsyncThunk or in other slices.
  extraReducers: (builder) => {
    builder
      .addCase(incrementAsync.pending, (state) => {
        state.status = 'loading'
      })
      .addCase(incrementAsync.fulfilled, (state, action) => {
        state.status = 'idle'
        state.value += action.payload
      })
  },
})

export const { increment, decrement, incrementByAmount } = counterSlice.actions

// The function below is called a selector and allows us to select a value from
// the state. Selectors can also be defined inline where they're used instead of
// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`
export const selectCount = (state: AppState) => state.counter.value


export default counterSlice.reducer
```


The counter example is from the nextjs and reactjs docs. 
We use it here to test and verify our set up. 
See [NextJS React JS example](https://github.com/vercel/next.js/tree/canary/examples/with-redux) for more details. 

#### app/hooks.ts

```ts 

import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'

import type { AppDispatch, AppState } from './store'


// Use throughout your app instead of plain `useDispatch` and `useSelector`
export const useAppDispatch = () => useDispatch<AppDispatch>()

export const useAppSelector: TypedUseSelectorHook<AppState> = useSelector
```

#### app/store.ts

```ts

import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit'

import counterReducer from '../features/counter/counterSlice'

export function makeStore() {
  return configureStore({
    reducer: { counter: counterReducer },
  })
}

const store = makeStore()

export type AppState = ReturnType<typeof store.getState>

export type AppDispatch = typeof store.dispatch

export type AppThunk<ReturnType = void> = ThunkAction<
  ReturnType,
  AppState,
  unknown,
  Action<string>
>

export default store

```

Lastly modify `pages/_app.tsx` as follows to use the store:

#### pages/_app.tsx

```tsx
import '../styles/globals.css'
import type { AppProps } from 'next/app'
import React from 'react'
import { Provider } from 'react-redux'
import store from '../app/store'

function MyApp({ Component, pageProps }: AppProps) {
  return (
  <Provider store={store}>
    <Component {...pageProps} />
  </Provider>
  );
}

export default MyApp

```

## Step 6 Create counter component 

Next we need a component to drive this. We take the counter component from the nextJS example to demonstrate. Create the file `features/counter/Counter.tsx` and `features/counter/Counter.module.css` as follows:

#### features/counter/Counter.tsx

```tsx 
import { useState } from 'react'

import { useAppSelector, useAppDispatch } from '../../app/hooks'
import {
  decrement,
  increment,
  incrementByAmount,
  incrementAsync,
  incrementIfOdd,
  selectCount,
} from './counterSlice'
import styles from './Counter.module.css'

function Counter() {
  const dispatch = useAppDispatch()
  const count = useAppSelector(selectCount)
  const [incrementAmount, setIncrementAmount] = useState('2')

  const incrementValue = Number(incrementAmount) || 0

  return (
    <div>
      <div className={styles.row}>
        <button
          className={styles.button}
          aria-label="Decrement value"
          onClick={() => dispatch(decrement())}
        >
          -
        </button>
        <span className={styles.value}>{count}</span>
        <button
          className={styles.button}
          aria-label="Increment value"
          onClick={() => dispatch(increment())}
        >
          +
        </button>
      </div>
      <div className={styles.row}>
        <input
          className={styles.textbox}
          aria-label="Set increment amount"
          value={incrementAmount}
          onChange={(e) => setIncrementAmount(e.target.value)}
        />
        <button
          className={styles.button}
          onClick={() => dispatch(incrementByAmount(incrementValue))}
        >
          Add Amount
        </button>
        <button
          className={styles.asyncButton}
          onClick={() => dispatch(incrementAsync(incrementValue))}
        >
          Add Async
        </button>
        <button
          className={styles.button}
          onClick={() => dispatch(incrementIfOdd(incrementValue))}
        >
          Add If Odd
        </button>
      </div>
    </div>
  )
}

export default Counter
```


#### features/counter/Counter.module.css

```css
.row {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .row > button {
    margin-left: 4px;
    margin-right: 8px;
  }
  
  .row:not(:last-child) {
    margin-bottom: 16px;
  }
  
  .value {
    font-size: 78px;
    padding-left: 16px;
    padding-right: 16px;
    margin-top: 2px;
    font-family: 'Courier New', Courier, monospace;
  }
  
  .button {
    appearance: none;
    background: none;
    font-size: 32px;
    padding-left: 12px;
    padding-right: 12px;
    outline: none;
    border: 2px solid transparent;
    color: rgb(112, 76, 182);
    padding-bottom: 4px;
    cursor: pointer;
    background-color: rgba(112, 76, 182, 0.1);
    border-radius: 2px;
    transition: all 0.15s;
  }
  
  .textbox {
    font-size: 32px;
    padding: 2px;
    width: 64px;
    text-align: center;
    margin-right: 4px;
  }
  
  .button:hover,
  .button:focus {
    border: 2px solid rgba(112, 76, 182, 0.4);
  }
  
  .button:active {
    background-color: rgba(112, 76, 182, 0.2);
  }
  
  .asyncButton {
    composes: button;
    position: relative;
  }
  
  .asyncButton:after {
    content: '';
    background-color: rgba(112, 76, 182, 0.15);
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    opacity: 0;
    transition: width 1s linear, opacity 0.5s ease 1s;
  }
  
  .asyncButton:active:after {
    width: 0%;
    opacity: 1;
    transition: 0s;
  }
```

Now let's use the counter component that we defined by modifying `pages\index.tsx` 
as follows:

#### pages\index.tsx
```tsx 
import type { NextPage } from 'next'
import Head from 'next/head'
import Image from 'next/image'
import Counter from '../features/counter/Counter'
import styles from '../styles/Home.module.css'

const Home: NextPage = () => {
  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <Counter />
...
  )
}

export default Home

```

Now let's use React Bootstrap. 


#### Step 7 Use Bootstrap React 

```bash 

npm install react-bootstrap bootstrap@5.1.3

```

Modify `pages/_app.tsx` as follows:

#### pages/_app.tsx

```tsx
import '../styles/globals.css'
import type { AppProps } from 'next/app'
import React from 'react'
import { Provider } from 'react-redux'
import store from '../app/store'
import 'bootstrap/dist/css/bootstrap.min.css';
...
```


Modify `features/counter/Counter.tsx` as follows: 

#### features/counter/Counter.tsx

```tsx
import { useState } from 'react'

import Row from 'react-bootstrap/Row'
import Container from 'react-bootstrap/Container'
import Col from 'react-bootstrap/Col'
import Button from 'react-bootstrap/Button'
import Badge from 'react-bootstrap/Badge'

import { useAppSelector, useAppDispatch } from '../../app/hooks'
import {
  decrement,
  increment,
  incrementByAmount,
  incrementAsync,
  incrementIfOdd,
  selectCount,
} from './counterSlice'
import styles from './Counter.module.css'

function Counter() {
  const dispatch = useAppDispatch()
  const count = useAppSelector(selectCount)
  const [incrementAmount, setIncrementAmount] = useState('2')

  const incrementValue = Number(incrementAmount) || 0

  return (
    <Container>
        <Row >
        <Col md={3} >
                <Button variant="outline-primary"
                    aria-label="Decrement value"
                    onClick={() => dispatch(decrement())}
                >
                    -
                </Button>
                <Badge pill bg="secondary">{count}</Badge>
                <Button variant="outline-primary"
                 aria-label="Increment value"
                    onClick={() => dispatch(increment())}
                >
                    +
                </Button>
        </Col>
      </Row>
      <Row>
          <Col>
            <input
            className={styles.textbox}
            aria-label="Set increment amount"
            value={incrementAmount}
            onChange={(e) => setIncrementAmount(e.target.value)}
            />
            <Button onClick={() => dispatch(incrementByAmount(incrementValue))}
            >
            Add Amount
            </Button>
            <Button onClick={() => dispatch(incrementAsync(incrementValue))}
            >
            Add Async
            </Button>
            <Button onClick={() => dispatch(incrementIfOdd(incrementValue))}>
            Add If Odd
            </Button>
        </Col>
      </Row>
      </Container>
  )
}

export default Counter
```

------

# Add form validation with workout example 

## Step 1 Install Yup

```bash 
npm install -S yup
```

## Step 2 Install Formik 

```bash 
npm install formik --save
```


## Add support for firebase

#### Add config.ts file to your project 

```
  export const config = {
    dbURL: "https://YOUR_URL_FOR_FIREBASE.firebaseio.com/workout.json"
  };
```